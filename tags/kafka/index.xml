<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Kafka on DoNT - Do Not Think!!!</title>
    <link>https://dont.kr/tags/kafka/</link>
    <description>Recent content in Kafka on DoNT - Do Not Think!!!</description>
    <generator>Hugo -- 0.152.2</generator>
    <language>ko-kr</language>
    <lastBuildDate>Thu, 27 Nov 2025 00:00:00 +0900</lastBuildDate>
    <atom:link href="https://dont.kr/tags/kafka/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Apache Kafka 기본 개념 정리</title>
      <link>https://dont.kr/posts/2025/2025-11-27-apache-kafka/</link>
      <pubDate>Thu, 27 Nov 2025 00:00:00 +0900</pubDate>
      <guid>https://dont.kr/posts/2025/2025-11-27-apache-kafka/</guid>
      <description>&lt;p&gt;Apache Kafka의 핵심 개념과 동작 원리를 정리합니다.&lt;/p&gt;
&lt;h2 id=&#34;아키텍처&#34;&gt;아키텍처&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Kafka Cluster (여러 Broker의 집합)
    │
    └─ Broker (카프카 서버, 여러 대 가능)
           │
           └─ Topic (메시지 종류)
                  │
                  ├─ Partition 0 ──┐
                  ├─ Partition 1 ──┼── Consumer Group A ─┬─ Consumer 1
                  └─ Partition 2 ──┘                     ├─ Consumer 2
                          │                              └─ Consumer 3
                          │
                          └──────────── Consumer Group B ─── Consumer 1
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;구성-요소&#34;&gt;구성 요소&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Broker&lt;/strong&gt;: Kafka 서버 (여러 대로 클러스터 구성)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Topic&lt;/strong&gt;: 메시지 종류별 논리적 그룹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Partition&lt;/strong&gt;: 토픽 내 병렬 처리 단위&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Consumer Group&lt;/strong&gt;: 동일 group.id로 묶인 컨슈머들&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;설계-시-고려사항&#34;&gt;설계 시 고려사항&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;파티션 수 = 최대 병렬 처리 수&lt;/li&gt;
&lt;li&gt;파티션 수 ≥ 컨슈머 수 (컨슈머가 더 많으면 일부는 idle)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;메시지-흐름&#34;&gt;메시지 흐름&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Producer ──produce──▶ Kafka Broker ◀──poll── Consumer
                                                  │
                                                  ▼
                                              consume
                                              처리 로직
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;동작-방식&#34;&gt;동작 방식&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Producer가 메시지 전송&lt;/li&gt;
&lt;li&gt;Broker가 파티션에 메시지 저장&lt;/li&gt;
&lt;li&gt;Consumer가 주기적으로 폴링&lt;/li&gt;
&lt;li&gt;새 메시지 있으면 가져와서 처리&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;메시지-관리&#34;&gt;메시지 관리&lt;/h2&gt;
&lt;h3 id=&#34;offset-관리&#34;&gt;Offset 관리&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Offset&lt;/strong&gt;: 파티션 내 메시지 위치 (0부터 시작)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Committed Offset&lt;/strong&gt;: 처리 완료한 마지막 위치&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Latest Offset&lt;/strong&gt;: 파티션의 마지막 메시지 위치&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Consumer Lag&lt;/strong&gt;: Latest - Committed (처리 지연 정도)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;commit-전략&#34;&gt;Commit 전략&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 자동 커밋 (기본값)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;enable.&lt;span style=&#34;color:#a6e22e&#34;&gt;auto&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;commit&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;auto.&lt;span style=&#34;color:#a6e22e&#34;&gt;commit&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;interval&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ms&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;5000
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 수동 커밋&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;commitSync&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;consumer.&lt;span style=&#34;color:#a6e22e&#34;&gt;commitAsync&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;메시지-전달-보장&#34;&gt;메시지 전달 보장&lt;/h2&gt;
&lt;h3 id=&#34;1-at-most-once&#34;&gt;1. At-most-once&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;처리 전 commit&lt;/li&gt;
&lt;li&gt;장점: 중복 없음&lt;/li&gt;
&lt;li&gt;단점: 메시지 유실 가능&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-at-least-once-기본값&#34;&gt;2. At-least-once (기본값)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;처리 후 commit&lt;/li&gt;
&lt;li&gt;장점: 메시지 유실 없음&lt;/li&gt;
&lt;li&gt;단점: 중복 처리 가능&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;중요&lt;/strong&gt;: 애플리케이션 레벨에서 멱등성 보장 필요&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-exactly-once&#34;&gt;3. Exactly-once&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;트랜잭션 사용&lt;/li&gt;
&lt;li&gt;장점: 중복도 유실도 없음&lt;/li&gt;
&lt;li&gt;단점: 성능 오버헤드&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;메시지-보관&#34;&gt;메시지 보관&lt;/h2&gt;
&lt;p&gt;일반 메시지 큐와 달리 Kafka는 consume 후에도 메시지 보관:&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
